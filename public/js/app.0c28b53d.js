(function(e){function t(t){for(var o,c,i=t[0],s=t[1],u=t[2],d=0,f=[];d<i.length;d++)c=i[d],a[c]&&f.push(a[c][0]),a[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);l&&l(t);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={app:0},r=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d0a3577":"0c6ed0e5","chunk-2d0a43df":"3f172ac8","chunk-2d0aab07":"edd2015f","chunk-2d0abc00":"e0c858d7","chunk-2d0ae937":"389f3c11","chunk-2d0aeb45":"671acb52","chunk-2d0afa49":"c4da21e2","chunk-2d0b2762":"b19570e5","chunk-2d0b6187":"19d05469","chunk-2d0ba136":"d610093f","chunk-2d0bb267":"32c34d82","chunk-2d0bcec1":"d5b61dde","chunk-2d0bff92":"6a2eabbb","chunk-2d0c0494":"1d432945","chunk-2d0c0a09":"cdb911ab","chunk-2d0c1ed0":"4354e978","chunk-2d0c4313":"dc5398d7","chunk-2d0c46d1":"fa0845c7","chunk-2d0c512b":"875d6d4a","chunk-2d0cf16e":"3691ea11","chunk-2d0d056d":"b5ce89fe","chunk-2d0d0645":"995c91b6","chunk-2d0d2f22":"ce8b3dd3","chunk-2d0d7e63":"32ff38a2","chunk-2d0e1b57":"d9e637ff","chunk-2d0e1fbe":"12a45b65","chunk-2d0e22d6":"f1b7700f","chunk-2d0e542a":"28f29d3f","chunk-2d0e57ec":"76ea1212","chunk-2d0e6553":"c83cb76a","chunk-2d0ea098":"bdff2097","chunk-2d208ac5":"60d9f986","chunk-2d209408":"ed8d8b14","chunk-2d20f745":"20ba6202","chunk-2d20ff23":"cc992728","chunk-2d2138c7":"6ab48f6e","chunk-2d217e5b":"73284392","chunk-2d21b84a":"b9fd655d","chunk-2d21dcd2":"f28ce99f","chunk-2d21f327":"e1f0bb23","chunk-2d2214b3":"6220ebfc","chunk-2d221a34":"059e8396","chunk-2d22502a":"be7d0abd","chunk-2d228ca6":"2301aaaa","chunk-2d2295e9":"a7fd7320","chunk-2d22c171":"6f917d33","chunk-2d22c2b8":"cd35e71b","chunk-2d22ca58":"d1f13469","chunk-2d2311f7":"0dc04b7d","chunk-2d237ee7":"39e9307d","chunk-2d238465":"39fbc9a8","chunk-7532b3ea":"950a975e","chunk-774ac664":"5f085b2a"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,o){n=a[e]=[t,o]});t.push(n[2]=o);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=c(e),r=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+o+": "+r+")");c.type=o,c.request=r,n[1](c)}a[e]=void 0}};var u=setTimeout(function(){r({type:"timeout",target:s})},12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0066":function(e,t,n){},"0c1e":function(e,t,n){"use strict";var o=n("0066"),a=n.n(o);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],c=(n("5c0b"),n("2877")),i={},s=Object(c["a"])(i,a,r,!1,null,null,null),u=s.exports,d=n("8c4f"),l=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reveal"},[n("div",{staticClass:"slides"},[n("section",{staticClass:"main-page"},[n("h2",[e._v("Canvas & 几何图形基础介绍")]),n("span",{staticStyle:{"margin-left":"500px"}},[e._v("by 刘鑫")])]),n("section",{attrs:{"data-markdown":"","data-separator":"---","data-separator-vertical":"--"}},[n("script",{attrs:{type:"text/template"}},[e._v("\n        ## 最简单的demo\n        - [中国地图](http://localhost:8080/code/1)\n        - [热力图](http://localhost:8080/code/3)\n      ")])]),n("section",{attrs:{"data-markdown":"","data-separator":"---","data-separator-vertical":"--"}},[e._v("\n      ## 主要内容\n      - 一些canvas[基本用法](http://localhost:8080/code/2) "),e._v("\n      - 一些几何图形算法 "),e._v("\n      - 交互 = 绘制 + 几何判定 ")]),n("section",{attrs:{"data-markdown":"","data-separator":"---","data-separator-vertical":"--"}},[n("script",{attrs:{type:"text/template"}},[e._v("\n        ## 几何基础算法\n        - [点即向量](http://localhost:8080/code/4?lang=typescript&compile=false&mode=default)\n        - [点在直线判定](http://localhost:8080/code/5?lang=typescript&compile=false&mode=default)\n        - [点在多边形判定](http://localhost:8080/code/6?lang=typescript&compile=false&mode=default)\n        - 两个矩形相交判断 即 判断两个矩形的外包矩形的宽高是否小于两个矩形宽高分别相加\n        - .....\n      ")])]),n("section",{attrs:{"data-markdown":"","data-separator":"---","data-separator-vertical":"--"}},[e._v("\n      ## Canvas交互\n    ")]),n("section",[n("h2",[e._v("Q & A ")])])])])}],h={name:"Session",mounted:function(){setTimeout(function(){Reveal.initialize({controls:!0,progress:!0,history:!0,center:!0,transition:"slide",dependencies:[{src:"../../library/plugin/markdown/marked.js",condition:function(){return!!document.querySelector("[data-markdown]")}},{src:"../../library/plugin/markdown/markdown.js",condition:function(){return!!document.querySelector("[data-markdown]")}},{src:"../../library/plugin/highlight/highlight.js",async:!0,callback:function(){hljs.initHighlightingOnLoad()}},{src:"../../library/plugin/zoom-js/zoom.js",async:!0},{src:"../../library/plugin/notes/notes.js",async:!0},{src:"../../library/plugin/canvas/index.js"}]})})}},p=h,v=Object(c["a"])(p,l,f,!1,null,"e32d8d56",null),m=v.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"code-wrap"},[n("el-row",{staticStyle:{height:"95%"},attrs:{type:"flex",gutter:20}},[n("el-col",{staticClass:"left-panel",attrs:{span:12}},[n("div",{ref:"codePanel",staticClass:"code-editor single-panel",attrs:{id:"monaco"}})]),n("el-col",{staticClass:"right-panel",attrs:{span:12}},[n("el-button-group",{directives:[{name:"show",rawName:"v-show",value:e.showToolBar,expression:"showToolBar"}],staticClass:"xCanvas-toolbar"},[n("el-button",{attrs:{size:"small",round:""},on:{click:function(t){return e.activeActions("point")}}},[e._v("点")]),n("el-button",{attrs:{size:"small",round:""},on:{click:function(t){return e.activeActions("polygon")}}},[e._v("多边形")]),n("el-button",{attrs:{size:"small",round:""},on:{click:function(t){return e.activeActions("line")}}},[e._v("线")]),n("el-button",{attrs:{size:"small",round:""},on:{click:function(t){return e.activeActions("arrow")}}},[e._v("箭头")]),n("el-button",{attrs:{size:"small",round:""},on:{click:function(t){return e.activeActions("clear")}}},[e._v("清空")])],1),n("div",{ref:"resultPanel",staticClass:"result-wrap single-panel",attrs:{id:"stage"}})],1)],1),n("el-row",{staticClass:"handle-row",attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-button",{staticClass:"compile-btn",attrs:{type:"primary",size:"small"},on:{click:e.compile}},[e._v("运行")])],1)],1)],1)},b=[],y=n("75fc"),w=n("33f9"),k=(n("7257"),n("a106"),n("d225")),C=n("b0b4"),x=n("bc3a"),P=n.n(x),j=n("5c96"),_=n.n(j),T=P.a.create({baseURL:"http://localhost:8080/",timeout:15e4});T.interceptors.request.use(function(e){return e},function(e){Promise.reject(e)}),T.interceptors.response.use(function(e){var t=e.data;return 200===t.code?t.data:(j["Message"].info("".concat(t.code,":").concat(t.message)),t)},function(e){var t=e.response&&e.response.data;return j["Message"].error("error:返回数据出错"),Promise.reject(t)});var L=function(){function e(){Object(k["a"])(this,e)}return Object(C["a"])(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,o){T.get(e,t).then(function(e){n(e)}).catch(function(e){o(e)})})}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(o,a){T.post(e,t,n).then(function(e){o(e)}).catch(function(e){a(e)})})}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(o,a){T.put(e,t,n).then(function(e){o(e)}).catch(function(e){a(e)})})}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,o){T.delete(e,t).then(function(e){n(e)}).catch(function(e){o(e)})})}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,o){T.delete(e,t).then(function(e){n(e)}).catch(function(e){o(e)})})}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(o,a){T.patch(e,t,n).then(function(e){o(e)}).catch(function(e){a(e)})})}},{key:"request",value:function(e){return new Promise(function(t,n){T(e).then(function(e){t(e)}).catch(function(e){n(e)})})}}]),e}(),A=function(){function e(){Object(k["a"])(this,e)}return Object(C["a"])(e,null,[{key:"getMenuData",value:function(){return L.get("menu/getMenuData")}},{key:"getCodeString",value:function(e){return L.get("resource/code/".concat(e))}},{key:"getJSONResource",value:function(e){return L.get("resource/json/".concat(e))}}]),e}(),O={name:"Code",data:function(){return{editor:null,isCompile:!1,showToolBar:!1,stage:null,crossHLine:"",crossVLine:"",alpha:["a","b","c","d","e","f","g","h","i","j","k","l","m","n"],index:0}},mounted:function(){this.isCompile="false"!==this.$route.query.compile,this.showToolBar="default"===this.$route.query.mode,this.initEditor(),this.initCode(),window.addEventListener("resize",this.resize),this.showToolBar&&this.initXCanvas()},destroyed:function(){window.removeEventListener("resize",this.resize)},methods:{resize:function(){this.initEditor(),this.isCompile&&this.compile()},initEditor:function(){var e="";this.editor&&(e=this.editor.getValue());var t=this.$route.query.lang||"javascript";this.$refs.codePanel.innerHTML="",this.editor=w["editor"].create(document.getElementById("monaco"),{value:null,language:t}),e&&this.editor.setValue(e)},initCode:function(){var e=this,t=this.$route.params.codeIndex;A.getCodeString(t).then(function(t){e.editor.setValue(t),e.isCompile&&e.compile()})},compile:function(){for(var e=this.$refs.resultPanel,t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t[n]);var o=this.editor.getValue(),a=new Function(o);a.call(this)},initXCanvas:function(){this.stage=new xCanvas.Stage("stage",{zoomChange:.5,zoom:1,maxZoom:100}),this.crossHLine=new xCanvas.Polyline([],{dashArray:[5,3]}).addTo(this.stage),this.crossVLine=new xCanvas.Polyline([],{dashArray:[5,3]}).addTo(this.stage)},activeActions:function(e){var t={point:this.drawPoint,polygon:this.drawPolygon,line:this.drawLine,arrow:this.drawArrow,clear:this.clearAll};t[e]&&t[e]()},drawPoint:function(){var e=this,t=this.stage;t.once("click",function(n){var o=new xCanvas.Circle(n.pos,5,{fill:!0,color:"#ff0000"});t.addLayer(o),e.reset()})},drawPolygon:function(){var e=this,t=this.stage,n=new xCanvas.Polygon([],{fill:!1}).addTo(t),o=[],a=function(e){var t=e.pos;n.setGeometry([].concat(o,[t]))},r=function n(r){if(2===r.sourceTarget.button)return t.off("mousedown",n),t.off("mousemove",a),t.enableDrag(),void e.reset();t.disableDrag(),o.push(r.pos)};t.on("mousedown",r),t.on("mousemove",a)},drawLine:function(){var e=this,t=this.stage,n=new xCanvas.Polyline([]).addTo(t),o=[];t.on("mousedown",function(a){if(o.push(a.pos),2===a.sourceTarget.button)return t.off("mousedown"),t.off("mousemove"),void e.reset();t.on("mousemove",function(e){n.setGeometry([].concat(o,[e.pos]))})})},drawArrow:function(){var e=this,t=this.stage;t.on("mousedown",function(n){t.disableDrag();var o=new xCanvas.Polyline([n.pos,n.pos]),a=new xCanvas.Polygon([],{fill:!0}),r=new xCanvas.LayerGroup([o,a]).addTo(t),c=e.alpha[e.index%e.alpha.length];e.index++,t.on("mousemove",function(t){o.setLastVertex(t.pos),a.setGeometry(e.getArrowData.apply(e,Object(y["a"])(o.getGeometry())))}),t.once("mouseup",function(){t.off("mousedown"),t.off("mousemove");var n=r.getBound();new xCanvas.IText(n.getCenter(),c,{color:"#000000",weight:2}).addTo(t);t.enableDrag(),e.reset()})})},getArrowData:function(e,t){var n=new xCanvas.Math.Vector2(e),o=new xCanvas.Math.Vector2(t),a=new xCanvas.Math.Vector2(o.x-n.x,o.y-n.y),r=a.clone().rotate(180).normalize(),c=60,i=10,s=o.clone().add(r.clone().rotate(c/2).scale(i)),u=o.clone().add(r.clone().rotate(-c/2).scale(i));return[t,[s.x,s.y],[u.x,u.y]]},reset:function(){var e=this;this.stage.on("mousemove",function(t){var n=e.stage.getBound(),o=n.x,a=n.y,r=n.width,c=n.height;e.crossHLine.setGeometry([[o,t.pos[1]],[o+r,t.pos[1]]]),e.crossVLine.setGeometry([[t.pos[0],a],[t.pos[0],a+c]])})},clearAll:function(){this.stage.clearAllLayers(),this.crossHLine=new xCanvas.Polyline([],{dashArray:[5,3]}).addTo(this.stage),this.crossVLine=new xCanvas.Polyline([],{dashArray:[5,3]}).addTo(this.stage)}}},z=O,S=(n("0c1e"),Object(c["a"])(z,g,b,!1,null,"32b753f9",null)),E=S.exports;o["default"].use(d["a"]);var M=new d["a"]({mode:"history",base:"/",routes:[{path:"/",component:m},{path:"/code/:codeIndex",component:E}]}),V=n("2f62");o["default"].use(V["a"]);var $=new V["a"].Store({state:{},mutations:{},actions:{}});n("0fae"),n("dbc8");o["default"].prototype.$Http=A,o["default"].config.productionTip=!1,o["default"].use(_.a),new o["default"]({router:M,store:$,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var o=n("5e27"),a=n.n(o);a.a},"5e27":function(e,t,n){},dbc8:function(e,t,n){}});
//# sourceMappingURL=app.0c28b53d.js.map